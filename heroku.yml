build:
    docker:
      web: Dockerfile
      worker: Dockerfile
run:
    web: ./boot.sh
    worker:
        entrypoint: rq
        command: worker -u ${REDIS_URL} flask_blog-tasks

    # rq_worker:
    #     build: .
    #     image: flask_app
    #     container_name: rq_worker
    #     env_file: .env
    #     depends_on:
    #         - redis
    #     networks:
    #         flask_blog:
    #             aliases:
    #                 - rq_worker
    #     entrypoint: rq
    #     command: worker -u ${REDIS_URL} flask_blog-tasks

# setup:
#     addons:
#       - plan: heroku-postgresql
#         as: DATABASE
# build:
#     docker:
#         web: Dockerfile
#         elastic: elastic.Dockerfile
# run:
#     web: ./boot.sh
#     elastic: -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node"
